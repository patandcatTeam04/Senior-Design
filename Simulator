//this program simulates contractions
//it produces contractions with duration 30-120 secs at varying frequencies, with up to 90 secs.
//b/n and no fewer than 50 seconds. between
//set randomly generated duration and frequency numbers & times as integers:
int randNumber_dur;
int randNumber_freq;
int randNumber_dur_time;
int randNumber_freq_time;
int LED = 13; //defines PIN13 to light the LED

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600); //setup serial monitor
  randomSeed(analogRead(0)); //initializes the random number generator
  pinMode(LED, OUTPUT); //sets up PIN13
}

void loop() {
  // run the following continuously:
  //DURATION (contraction generation):
  randNumber_dur = random(30, 130); //generate random number from 30 to 120
  // randNumber_dur = random(3, 12); //generate random number from 3 to 12 for troubleshooting efficiency
  Serial.print("duration = ");  Serial.println(randNumber_dur); //display selected duration
  digitalWrite(LED, HIGH); //turn the LED ON
  Serial.println("LED ON");
  randNumber_dur_time = (randNumber_dur * 1000) / 4; //change delay time into milliseconds
  //break up delay time into durations short enough to be readable
  delay(randNumber_dur_time);
  Serial.println("1/4");
  delay(randNumber_dur_time);
  Serial.println("Half way there!");
  delay(randNumber_dur_time);
  Serial.println("3/4");
  delay(randNumber_dur_time);
  digitalWrite(LED, LOW); //turn the LED OFF
  Serial.println("LED OFF");
  if (randNumber_dur > 120) { //Optoco should alert user when this serial monitor warning is displayed
    //  if (randNumber_dur < 3 || randNumber_dur > 12) {
    Serial.print("dur danger! = "); Serial.println(randNumber_freq);
  }
//FREQUENCY (break b/n contractions)
  randNumber_freq = random(50, 90); //generate random number from 50 to 90; under 60 is dangerous
 // randNumber_freq = random(15, 29); //generate random number from 5 to 9 for troubleshooting efficiency
  randNumber_freq_time = (randNumber_freq * 1000) / 4;
  Serial.print("frequency = "); Serial.println(randNumber_freq); //change delay time into milliseconds
  //break up delay time into durations short enough to be readable
  delay(randNumber_freq_time);
  Serial.println("1/4");
  delay(randNumber_freq_time);
  Serial.println("Half way there!");
  delay(randNumber_freq_time);
  Serial.println("3/4");
  delay(randNumber_freq_time);
  //if the contraction is outside the safe physiological range, display SOMETHING
  //so we know if our device pickedup on it and alerted the user:
  if (randNumber_freq < 60 || randNumber_freq > 90) { //Optoco should alert user when this serial monitor warning is displayed
    //   if (randNumber_freq < 15 || randNumber_freq > 29) {
    Serial.print("freq danger! = "); Serial.println(randNumber_freq);
  }

}
